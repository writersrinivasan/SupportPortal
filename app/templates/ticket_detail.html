{% extends "base.html" %}

{% block title %}Ticket #{{ ticket.id }} - SupportPortal{% endblock %}

{% block content %}
<h2>Ticket #{{ ticket.id }}</h2>
<div class="card">
    <div class="card-body">
        <h5 class="card-title">{{ ticket.title }}</h5>
        <p class="card-text">{{ ticket.description }}</p>
        <p><strong>Status:</strong> {{ ticket.status }}</p>
        <p><strong>Priority:</strong> {{ ticket.priority }}</p>
        <p><strong>Created:</strong> {{ ticket.created_at.strftime('%Y-%m-%d %H:%M') }}</p>
        <p><strong>Client:</strong> {{ ticket.client.username }}</p>
        <p><strong>Assigned To:</strong> {{ ticket.support.username if ticket.support else 'Unassigned' }}</p>
    </div>
</div>
{% if current_user.role == 'support' %}
    <h3>Update Ticket</h3>
    <form method="POST">
        {{ form.hidden_tag() }}
        <div class="mb-3">
            {{ form.status.label(class="form-label") }}
            {{ form.status(class="form-control") }}
        </div>
        <div class="mb-3">
            {{ form.assigned_to.label(class="form-label") }}
            {{ form.assigned_to(class="form-control") }}
        </div>
        {{ form.submit(class="btn btn-primary") }}
    </form>
{% endif %}
{% endblock %}
